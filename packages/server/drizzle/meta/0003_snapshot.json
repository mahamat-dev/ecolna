{
  "id": "4e8bf202-41cd-492f-93d6-7082b924268b",
  "prevId": "9d0a706a-216f-469d-a814-03eacfaad8b0",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.academic_year": {
      "name": "academic_year",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "starts_on": {
          "name": "starts_on",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "ends_on": {
          "name": "ends_on",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "academic_year_code_unique": {
          "name": "academic_year_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.class_section": {
      "name": "class_section",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "academic_year_id": {
          "name": "academic_year_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "grade_level_id": {
          "name": "grade_level_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "capacity": {
          "name": "capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "room": {
          "name": "room",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {
        "uq_class_section_triple": {
          "name": "uq_class_section_triple",
          "columns": [
            {
              "expression": "academic_year_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "grade_level_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "class_section_academic_year_id_academic_year_id_fk": {
          "name": "class_section_academic_year_id_academic_year_id_fk",
          "tableFrom": "class_section",
          "tableTo": "academic_year",
          "columnsFrom": [
            "academic_year_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "class_section_grade_level_id_grade_level_id_fk": {
          "name": "class_section_grade_level_id_grade_level_id_fk",
          "tableFrom": "class_section",
          "tableTo": "grade_level",
          "columnsFrom": [
            "grade_level_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.class_section_subject": {
      "name": "class_section_subject",
      "schema": "",
      "columns": {
        "class_section_id": {
          "name": "class_section_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "subject_id": {
          "name": "subject_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "class_section_subject_class_section_id_class_section_id_fk": {
          "name": "class_section_subject_class_section_id_class_section_id_fk",
          "tableFrom": "class_section_subject",
          "tableTo": "class_section",
          "columnsFrom": [
            "class_section_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "class_section_subject_subject_id_subject_id_fk": {
          "name": "class_section_subject_subject_id_subject_id_fk",
          "tableFrom": "class_section_subject",
          "tableTo": "subject",
          "columnsFrom": [
            "subject_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "pk_class_section_subject": {
          "name": "pk_class_section_subject",
          "columns": [
            "class_section_id",
            "subject_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.education_stage": {
      "name": "education_stage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "education_stage_code_unique": {
          "name": "education_stage_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.grade_level": {
      "name": "grade_level",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "stage_id": {
          "name": "stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "uq_grade_level_stage_code": {
          "name": "uq_grade_level_stage_code",
          "columns": [
            {
              "expression": "stage_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "grade_level_stage_id_education_stage_id_fk": {
          "name": "grade_level_stage_id_education_stage_id_fk",
          "tableFrom": "grade_level",
          "tableTo": "education_stage",
          "columnsFrom": [
            "stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.subject": {
      "name": "subject",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stage_id": {
          "name": "stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "subject_stage_id_education_stage_id_fk": {
          "name": "subject_stage_id_education_stage_id_fk",
          "tableFrom": "subject",
          "tableTo": "education_stage",
          "columnsFrom": [
            "stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "subject_code_unique": {
          "name": "subject_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.term": {
      "name": "term",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "academic_year_id": {
          "name": "academic_year_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "starts_on": {
          "name": "starts_on",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "ends_on": {
          "name": "ends_on",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "order_index": {
          "name": "order_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {
        "uq_term_year_name": {
          "name": "uq_term_year_name",
          "columns": [
            {
              "expression": "academic_year_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "term_academic_year_id_academic_year_id_fk": {
          "name": "term_academic_year_id_academic_year_id_fk",
          "tableFrom": "term",
          "tableTo": "academic_year",
          "columnsFrom": [
            "academic_year_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audit_log": {
      "name": "audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "actor_profile_id": {
          "name": "actor_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "audit_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "audit_log_actor_profile_id_profiles_id_fk": {
          "name": "audit_log_actor_profile_id_profiles_id_fk",
          "tableFrom": "audit_log",
          "tableTo": "profiles",
          "columnsFrom": [
            "actor_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.enrollment": {
      "name": "enrollment",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "student_profile_id": {
          "name": "student_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_section_id": {
          "name": "class_section_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "academic_year_id": {
          "name": "academic_year_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "enrollment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ACTIVE'"
        },
        "joined_on": {
          "name": "joined_on",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "exited_on": {
          "name": "exited_on",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "exit_reason": {
          "name": "exit_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "roll_no": {
          "name": "roll_no",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "uq_enrollment_student_year": {
          "name": "uq_enrollment_student_year",
          "columns": [
            {
              "expression": "student_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "academic_year_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "uq_enrollment_student_section": {
          "name": "uq_enrollment_student_section",
          "columns": [
            {
              "expression": "student_profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "class_section_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "uq_roll_in_section": {
          "name": "uq_roll_in_section",
          "columns": [
            {
              "expression": "class_section_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "roll_no",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "enrollment_student_profile_id_profiles_id_fk": {
          "name": "enrollment_student_profile_id_profiles_id_fk",
          "tableFrom": "enrollment",
          "tableTo": "profiles",
          "columnsFrom": [
            "student_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "enrollment_class_section_id_class_section_id_fk": {
          "name": "enrollment_class_section_id_class_section_id_fk",
          "tableFrom": "enrollment",
          "tableTo": "class_section",
          "columnsFrom": [
            "class_section_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "enrollment_academic_year_id_academic_year_id_fk": {
          "name": "enrollment_academic_year_id_academic_year_id_fk",
          "tableFrom": "enrollment",
          "tableTo": "academic_year",
          "columnsFrom": [
            "academic_year_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.guardian_student": {
      "name": "guardian_student",
      "schema": "",
      "columns": {
        "guardian_profile_id": {
          "name": "guardian_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "student_profile_id": {
          "name": "student_profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "link_type": {
          "name": "link_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "guardian_student_guardian_profile_id_profiles_id_fk": {
          "name": "guardian_student_guardian_profile_id_profiles_id_fk",
          "tableFrom": "guardian_student",
          "tableTo": "profiles",
          "columnsFrom": [
            "guardian_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "guardian_student_student_profile_id_profiles_id_fk": {
          "name": "guardian_student_student_profile_id_profiles_id_fk",
          "tableFrom": "guardian_student",
          "tableTo": "profiles",
          "columnsFrom": [
            "student_profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.guardian": {
      "name": "guardian",
      "schema": "",
      "columns": {
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "relationship": {
          "name": "relationship",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "guardian_profile_id_profiles_id_fk": {
          "name": "guardian_profile_id_profiles_id_fk",
          "tableFrom": "guardian",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "dob": {
          "name": "dob",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "photo_url": {
          "name": "photo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'TD'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "profiles_user_id_users_id_fk": {
          "name": "profiles_user_id_users_id_fk",
          "tableFrom": "profiles",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "profiles_user_id_unique": {
          "name": "profiles_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.staff": {
      "name": "staff",
      "schema": "",
      "columns": {
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "staff_no": {
          "name": "staff_no",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "staff_profile_id_profiles_id_fk": {
          "name": "staff_profile_id_profiles_id_fk",
          "tableFrom": "staff",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "staff_staff_no_unique": {
          "name": "staff_staff_no_unique",
          "nullsNotDistinct": false,
          "columns": [
            "staff_no"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.student": {
      "name": "student",
      "schema": "",
      "columns": {
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "admission_no": {
          "name": "admission_no",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "student_profile_id_profiles_id_fk": {
          "name": "student_profile_id_profiles_id_fk",
          "tableFrom": "student",
          "tableTo": "profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "student_admission_no_unique": {
          "name": "student_admission_no_unique",
          "nullsNotDistinct": false,
          "columns": [
            "admission_no"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_roles": {
      "name": "user_roles",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_roles_user_id_users_id_fk": {
          "name": "user_roles_user_id_users_id_fk",
          "tableFrom": "user_roles",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "login_id": {
          "name": "login_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auth_method": {
          "name": "auth_method",
          "type": "auth_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'LOGIN_ID'"
        },
        "password_hash": {
          "name": "password_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "failed_logins": {
          "name": "failed_logins",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "locked_until": {
          "name": "locked_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "secret_updated_at": {
          "name": "secret_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        },
        "users_login_id_unique": {
          "name": "users_login_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "login_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.audit_action": {
      "name": "audit_action",
      "schema": "public",
      "values": [
        "CREATE",
        "UPDATE",
        "DELETE",
        "ENROLL",
        "TRANSFER",
        "WITHDRAW",
        "GRADUATE",
        "LINK_GUARDIAN",
        "UNLINK_GUARDIAN"
      ]
    },
    "public.enrollment_status": {
      "name": "enrollment_status",
      "schema": "public",
      "values": [
        "ACTIVE",
        "TRANSFERRED_OUT",
        "WITHDRAWN",
        "GRADUATED"
      ]
    },
    "public.auth_method": {
      "name": "auth_method",
      "schema": "public",
      "values": [
        "EMAIL",
        "LOGIN_ID"
      ]
    },
    "public.role": {
      "name": "role",
      "schema": "public",
      "values": [
        "ADMIN",
        "STAFF",
        "TEACHER",
        "STUDENT",
        "GUARDIAN"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}